require("../../../common/manifest.js");
require("../../../common/vendor.js");
global.webpackJsonp([1],{"1SWy":function(e,n,t){"use strict";var s={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"header"},[n("img",{staticClass:"img",attrs:{src:"/static/img/unlogin.png"}}),this._v(" "),n("span",{staticClass:"span"},[this._v("登录，享受技术之旅吧！")])])}]};n.a=s},"8kAF":function(e,n){},G86x:function(e,n,t){"use strict";var s=t("ovl3"),o=t("1SWy");var a=function(e){t("f/yE")},i=t("ybqe")(s.a,o.a,a,"data-v-16ea1580",null);n.a=i.exports},V3XQ:function(e,n,t){"use strict";var s=t("Xxa5"),o=t.n(s),a=t("exGp"),i=t.n(a),r=t("vLgD"),c=t("VsUZ");n.a={props:{user:Object},methods:{sign:function(){var e=this;return i()(o.a.mark(function n(){var t;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(r.a)(c.h,"GET",{});case 2:t=n.sent,console.log(c.h+"\n",t),e.user=t,wx.setStorageSync("user",t),wx.showToast({title:"签到成功！"});case 7:case"end":return n.stop()}},n,e)}))()}}}},"f/yE":function(e,n){},"ir+/":function(e,n,t){"use strict";var s={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"header"},[t("img",{staticClass:"img",attrs:{src:e.user.avatarUrl}}),e._v(" "),t("span",{staticClass:"span"},[e._v(e._s(e.user.nickname))]),e._v(" "),t("span",{staticClass:"span",attrs:{eventid:"0"},model:{value:e.user.bonus,callback:function(n){e.user.bonus=n},expression:"user.bonus"}},[e._v("积分:"+e._s(e.user.bonus))]),e._v(" "),t("span",{staticClass:"span"},[t("van-button",{attrs:{size:"mini",type:"primary",eventid:"1",mpcomid:"0"},on:{click:e.sign}},[e._v("签到")])],1)])},staticRenderFns:[]};n.a=s},"lcW/":function(e,n,t){"use strict";var s={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[e.user?e._e():t("div",{staticClass:"user-no-login"},[t("IconHeadNoLogin",{attrs:{mpcomid:"0"}}),e._v(" "),t("van-button",{attrs:{type:"danger",size:"large","open-type":"getUserInfo",eventid:"0",mpcomid:"1"},on:{getuserinfo:e.bindGetUserInfo}},[e._v("\n      微信登录\n    ")])],1),e._v(" "),e.user?t("div",[t("IconHead",{attrs:{user:e.user,mpcomid:"2"}}),e._v(" "),t("van-cell",{attrs:{title:"我的兑换","is-link":"",eventid:"1",mpcomid:"3"},on:{click:e.jumpToPostList}}),e._v(" "),t("van-cell",{attrs:{title:"积分明细","is-link":"",eventid:"2",mpcomid:"4"},on:{click:e.jumpToBonusLogDetails}}),e._v(" "),t("van-cell",{attrs:{title:"我的投稿","is-link":"",eventid:"3",mpcomid:"5"},on:{click:e.jumpToContributionDetails}}),e._v(" "),t("van-cell",{attrs:{title:"完善信息","is-link":"",eventid:"4",mpcomid:"6"},on:{click:e.jumpToUserComplete}})],1):e._e()])},staticRenderFns:[]};n.a=s},nfrN:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=t("5nAL"),o=t.n(s),a=t("rDLN");new o.a(a.a).$mount()},"nn/9":function(e,n,t){"use strict";var s=t("V3XQ"),o=t("ir+/");var a=function(e){t("8kAF")},i=t("ybqe")(s.a,o.a,a,"data-v-6ae95285",null);n.a=i.exports},ovl3:function(e,n,t){"use strict";n.a={}},rDLN:function(e,n,t){"use strict";var s=t("vkNK"),o=t("lcW/");var a=function(e){t("vMmZ")},i=t("ybqe")(s.a,o.a,a,"data-v-99458f8c",null);n.a=i.exports},vMmZ:function(e,n){},vkNK:function(e,n,t){"use strict";var s=t("Xxa5"),o=t.n(s),a=t("exGp"),i=t.n(a),r=t("vLgD"),c=t("VsUZ"),u=t("nn/9"),l=t("G86x"),v=t("N+Om");t.n(v);n.a={components:{IconHead:u.a,IconHeadNoLogin:l.a},data:function(){return{user:null}},methods:{bindGetUserInfo:function(e){e.mp.detail.rawData?this.login(e):wx.showToast({title:"获取用户信息失败",icon:"none"})},login:function(e){var n=this,t=e.mp.detail.userInfo;console.log(t),wx.login({success:function(e){Object(r.a)(c.c,"POST",{code:e.code,wxNickname:t.nickName,avatarUrl:t.avatarUrl,gender:t.gender}).then(function(e){console.log(c.c+"\n",e),console.log("登录成功...",e),wx.setStorageSync("token",e.token),wx.setStorageSync("user",e.user),console.log("user...",e.user),wx.showToast({title:"登录成功！"}),console.log("user...",e.user),n.user=e.user}).catch(function(e){console.log("error",e),reject(e)})}})},getUser:function(){var e=this;return i()(o.a.mark(function n(){var t;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(r.a)(c.l,"GET",{});case 2:t=n.sent,console.log(c.l+"\n",t),wx.setStorageSync("user",t),""==t.nickname||null==t.nickname?(console.log("设置了user"),e.user=null):e.user=t;case 6:case"end":return n.stop()}},n,e)}))()},jumpToPostList:function(){wx.navigateTo({url:"/pages/user/post-list/main"})},jumpToUserComplete:function(){wx.navigateTo({url:"/pages/user/complete/main"})},jumpToBonusLogDetails:function(){wx.navigateTo({url:"/pages/user/bonus-log/main"})},jumpToContributionDetails:function(){wx.navigateTo({url:"/pages/user/contribution/main"})}},onShow:function(){var e=wx.getStorageSync("token");console.log("token",e),console.log(e.expirationTime,(new Date).getTime()),console.log("token过期判断",e.expirationTime-(new Date).getTime()),e&&e.expirationTime-(new Date).getTime()>0?this.getUser():(conso,wx.clearStorage(),this.user=null)},created:function(){var e=wx.getStorageSync("user");e&&(this.user=e,console.log("user",e))}}}},["nfrN"]);